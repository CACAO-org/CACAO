<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>cacao: Predictive control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cacao-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">cacao
   &#160;<span id="projectnumber">Alpha Release 0.1.0</span>
   </div>
   <div id="projectbrief">Compute And Control For Adaptive Optics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_cacao_predictive_control.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Predictive control </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>Predictive control is implemented in two processes:</p>
<ul>
<li>The optimal auto-regressive (AR) filter predicting the current state from previous states is computed. The AR filter is computed from open-loop estimates, so the processes computing open-loop telemetry need to be running.</li>
<li>the AR filter is applied to write a prediction buffer, which can be written asynchronously from the main loop steps.</li>
</ul>
<p>The predictive filter is modal, and adopts the same modes as the main control loop.</p>
<h2>Scripts</h2>
<hr/>
<p> File Description </p><hr/>
<p> <b>aolARPF</b> find auto-regressive predictive filter</p>
<p><b>aolARPFblock</b> AO find optimal AR linear predictive filter </p><hr/>
<h2>Data flow</h2>
<p>Predictive control is set up by blocks of modes. A block is configured through the aolconf predictive control sub-panel, which writes to configuration files <code>conf/conf_PFblock_XXX.txt</code>, where XXX is the block number (000, 001, 002 etc...). Configuration files specify the modes within each block (index min to index max), the predictive filter order, time lag and and averaging gain.</p>
<p>For each block, there are 3 main processes involved in running the predictive control:</p>
<h3>Collecting input</h3>
<p><b>Watching input telemetry</b> this process listens to the input telemetry stream and periodically writes data to be used to compute a filter. This runs function <a class="el" href="AOloopControl__PredictiveControl_8c.html#a55f095e4bc95d0497fdc934d488490eb">AOloopControl_PredictiveControl_builPFloop_WatchInput()</a> in <a class="el" href="AOloopControl__PredictiveControl_8c.html" title="Adaptive Optics Control loop engine Predictive Control. ">AOloopControl_PredictiveControl.c</a>.</p>
<p>Runs in tmux sessions: aol0PFb0watchin, aol0PFb1watchin ...</p>
<h3>Computing Filter</h3>
<p><b>Computing filter</b>. Runs CLI command <code>mkARpfilt</code>, which runs function <a class="el" href="linARfilterPred_8c.html#afc6c7c5f8dbcd1656784dda99c517bde" title="Build predictive filter. ">LINARFILTERPRED_Build_LinPredictor()</a> in <a class="el" href="linARfilterPred_8c.html" title="linear auto-regressive predictive filter ">linARfilterPred.c</a>.</p>
<p>Runs in tmux sessions: aol0PFb0comp, aol1PFb0comp ...</p>
<h2>Running real-time prediction</h2>
<p><b>Prediction engine</b> (= apply filter). Runs script <code>./auxscripts/predFiltApplyRT</code>.</p>
<p>All 3 processes work in a chain, and can be turned on/off from the GUI. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_top.html">top</a></li><li class="navelem"><a class="el" href="page_cacao_users_guide.html">cacao User&#39;s Guide</a></li><li class="navelem"><a class="el" href="page_cacao_top_guide.html">Configuring and Running cacao</a></li>
    <li class="footer">Generated on Thu Jan 11 2018 19:49:32 for cacao by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
