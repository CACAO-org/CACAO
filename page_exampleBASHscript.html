<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cacao: Example BASH script</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cacao-logo-small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cacao
   &#160;<span id="projectnumber">Release 0.1.03-dev</span>
   </div>
   <div id="projectbrief">Compute And Control For Adaptive Optics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_exampleBASHscript.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example BASH script </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>This file: ./src/CommandLineInterface/doc/exampleBASHscript.md</dd></dl>
<hr/>
<div class="fragment"><div class="line">#!/bin/bash</div><div class="line"></div><div class="line"></div><div class="line"># number of arguments to script</div><div class="line">NBARGS=2</div><div class="line"></div><div class="line"></div><div class="line"># ======================= PROCESS NAME =================================</div><div class="line">pname=`basename &quot;$0&quot;`</div><div class="line">#echo &quot;pname = $pname&quot;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ======================= LOGGING =================================</div><div class="line">LOGGING=0 # set to 1 if logging </div><div class="line">function scriptlog {</div><div class="line">echo &quot;$@&quot; &gt;&gt; $0.log</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"># ================= screen printing using tput =============================</div><div class="line"></div><div class="line"># Num  Colour    #define         R G B</div><div class="line"></div><div class="line"># 0    black     COLOR_BLACK     0,0,0</div><div class="line"># 1    red       COLOR_RED       1,0,0</div><div class="line"># 2    green     COLOR_GREEN     0,1,0</div><div class="line"># 3    yellow    COLOR_YELLOW    1,1,0</div><div class="line"># 4    blue      COLOR_BLUE      0,0,1</div><div class="line"># 5    magenta   COLOR_MAGENTA   1,0,1</div><div class="line"># 6    cyan      COLOR_CYAN      0,1,1</div><div class="line"># 7    white     COLOR_WHITE     1,1,1</div><div class="line"></div><div class="line"># tput setab [1-7] # Set the background color using ANSI escape</div><div class="line"># tput setaf [1-7] # Set the foreground color using ANSI escape</div><div class="line"></div><div class="line"># tput bold    # Select bold mode</div><div class="line"># tput dim     # Select dim (half-bright) mode</div><div class="line"># tput smul    # Enable underline mode</div><div class="line"># tput rmul    # Disable underline mode</div><div class="line"># tput rev     # Turn on reverse video mode</div><div class="line"># tput smso    # Enter standout (bold) mode</div><div class="line"># tput rmso    # Exit standout mode</div><div class="line"></div><div class="line"># tput cup Y X # Move cursor to screen position X,Y (top left is 0,0)</div><div class="line"># tput cuf N   # Move N characters forward (right)</div><div class="line"># tput cub N   # Move N characters back (left)</div><div class="line"># tput cuu N   # Move N lines up</div><div class="line"># tput ll      # Move to last line, first column (if no cup)</div><div class="line"># tput sc      # Save the cursor position</div><div class="line"># tput rc      # Restore the cursor position</div><div class="line"># tput lines   # Output the number of lines of the terminal</div><div class="line"># tput cols    # Output the number of columns of the terminal</div><div class="line"></div><div class="line"></div><div class="line"># tput ech N   # Erase N characters</div><div class="line"># tput clear   # Clear screen and move the cursor to 0,0</div><div class="line"># tput el 1    # Clear to beginning of line</div><div class="line"># tput el      # Clear to end of line</div><div class="line"># tput ed      # Clear to end of screen</div><div class="line"># tput ich N   # Insert N characters (moves rest of line forward!)</div><div class="line"># tput il N    # Insert N lines</div><div class="line"></div><div class="line"></div><div class="line"># tput sgr0    # Reset text format to the terminal&#39;s default</div><div class="line"># tput bel     # Play a bell</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">function printHELP {</div><div class="line">echo &quot;------------------------------------------------------------------------&quot;</div><div class="line">echo &quot;$(tput bold) $pname : EXAMPLE SCRIPT $(tput sgr0)&quot;</div><div class="line">echo &quot; Full path name: $0&quot;</div><div class="line">echo &quot;------------------------------------------------------------------------&quot;</div><div class="line">echo &quot;  This script does nothing particularly useful. It is an example&quot;</div><div class="line">echo &quot;  it takes 2 input arguments&quot;</div><div class="line">echo &quot;   &quot;</div><div class="line">echo &quot; $(tput bold)USAGE:$(tput sgr0)&quot;</div><div class="line">echo &quot;     $0 [-hHLNCc] &lt;file1&gt; &lt;file2&gt;&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot; $(tput bold)OPTIONS:$(tput sgr0)&quot;</div><div class="line">echo &quot;     $(tput bold)-h$(tput sgr0)          help&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot; $(tput bold)INPUT:$(tput sgr0)&quot;</div><div class="line">echo &quot;     &lt;file1&gt;     first file&quot;</div><div class="line">echo &quot;     &lt;file2&gt;     second file&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot; $(tput bold)OUTPUT:$(tput sgr0)&quot;</div><div class="line">echo &quot;     out.txt     output file&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot;------------------------------------------------------------------------&quot;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line">printHELP1 ()</div><div class="line">{</div><div class="line">    printf &quot;%20s       Example script\n&quot; &quot;$0&quot; </div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">EXITSTATUS=0</div><div class="line"></div><div class="line">function checkFile {</div><div class="line">if [ -f $1 ]</div><div class="line">  then</div><div class="line">    echo &quot;[$(tput setaf 2)$(tput bold)   OK   $(tput sgr0)] File $(tput bold)$1$(tput sgr0) found&quot;</div><div class="line">   else</div><div class="line">    echo &quot;[$(tput setaf 1)$(tput bold) FAILED $(tput sgr0)] File $(tput bold)$1$(tput sgr0) not found&quot;</div><div class="line">    EXITSTATUS=1</div><div class="line">fi</div><div class="line">}</div><div class="line"></div><div class="line">function checkDir {</div><div class="line">if [ -d $1 ]</div><div class="line">  then</div><div class="line">    echo &quot;[$(tput setaf 2)$(tput bold)   OK   $(tput sgr0)] Directory $(tput bold)$1$(tput sgr0) found&quot;</div><div class="line">   else</div><div class="line">    echo &quot;[$(tput setaf 1)$(tput bold) FAILED $(tput sgr0)] Directory $(tput bold)$1$(tput sgr0) not found&quot;</div><div class="line">    EXITSTATUS=1</div><div class="line">fi</div><div class="line">}</div><div class="line"></div><div class="line">function cmdexists()</div><div class="line">{</div><div class="line">  command -v &quot;$1&quot; &gt;/dev/null 2&gt;&amp;1</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line">function checkCommand {</div><div class="line">if cmdexists $1; then</div><div class="line">    echo &quot;[$(tput setaf 2)$(tput bold)   OK   $(tput sgr0)] Command $(tput bold)$1$(tput sgr0) found&quot;</div><div class="line">else</div><div class="line">    echo &quot;[$(tput setaf 1)$(tput bold) FAILED $(tput sgr0)] Command $(tput bold)$1$(tput sgr0) not installed.  Aborting.&quot;; EXITSTATUS=1;</div><div class="line">fi</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"># ================= OPTIONS =============================</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># Transform long options to short ones</div><div class="line">singlelinehelp=0</div><div class="line">for arg in &quot;$@&quot;; do</div><div class="line">  shift</div><div class="line">  case &quot;$arg&quot; in</div><div class="line">    &quot;--help&quot;) set -- &quot;$@&quot; &quot;-h&quot; ;;</div><div class="line">    &quot;--help1&quot;) </div><div class="line">set -- &quot;$@&quot; &quot;-h&quot; </div><div class="line">singlelinehelp=1;</div><div class="line">;;</div><div class="line">    *)        set -- &quot;$@&quot; &quot;$arg&quot;</div><div class="line">  esac</div><div class="line">done</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#Parse command line flags</div><div class="line">#If an option should be followed by an argument, it should be followed by a &quot;:&quot;.</div><div class="line">#Notice there is no &quot;:&quot; after &quot;h&quot;. The leading &quot;:&quot; suppresses error messages from</div><div class="line">#getopts. This is required to get unrecognized option code to work.</div><div class="line"></div><div class="line">while getopts :hH:L:N:Cc FLAG; do</div><div class="line">  case $FLAG in</div><div class="line">    H) # detailed help</div><div class="line">    if [ &quot;$OPTARG&quot; == &quot;cf&quot; ]; then</div><div class="line">    printHELP_confFILES</div><div class="line">    exit</div><div class="line">    fi</div><div class="line">    echo &quot;ERROR: choice $OPTARG not recognized&quot;</div><div class="line">    exit</div><div class="line">    ;;</div><div class="line">    L)  #  set loop number</div><div class="line">      LOOPNUMBER=$OPTARG</div><div class="line">      echo &quot;LOOP NUMBER = $LOOPNUMBER&quot;</div><div class="line">      echo &quot;$LOOPNUMBER&quot; &gt; $LOOPNUMBER_file</div><div class="line">      aoconflog &quot;setting LOOPNUMBER to $LOOPNUMBER&quot;</div><div class="line">      ;;</div><div class="line">    N) # set loop name</div><div class="line">    LOOPNAME=$OPTARG</div><div class="line">    echo &quot;LOOP NAME = $LOOPNAME&quot;</div><div class="line">    echo &quot;$LOOPNAME&quot; &gt; $LOOPNAME_file</div><div class="line">    aoconflog &quot;setting LOOPNAME to $LOOPNAME&quot;</div><div class="line">    ;;</div><div class="line">    C) # configure CPU</div><div class="line">    echo &quot;Configure CPU&quot;</div><div class="line">    CPUconfRT=1</div><div class="line">    ;;</div><div class="line">    h)  #show help</div><div class="line">      if [ &quot;$singlelinehelp&quot; -eq &quot;0&quot; ]; then</div><div class="line">      printHELP</div><div class="line">      else</div><div class="line">      printHELP1</div><div class="line">      fi</div><div class="line">      exit</div><div class="line">      ;;</div><div class="line">    c) # clear</div><div class="line">    echo &quot;Clearing all settings&quot;</div><div class="line">    rm $LOOPNUMBER_file</div><div class="line">    rm $LOOPNAME_file</div><div class="line">    rm conf/*</div><div class="line">    rmdir conf</div><div class="line">    rm status/*</div><div class="line">    rmdir status</div><div class="line">    rm tmp/*</div><div class="line">    rmdir tmp</div><div class="line">    exit</div><div class="line">    ;;</div><div class="line">    \?) #unrecognized option - show help</div><div class="line">      echo -e \\n&quot;Option -${BOLD}$OPTARG${NORM} not allowed.&quot;</div><div class="line">      printHELP</div><div class="line">      #If you just want to display a simple error message instead of the full</div><div class="line">      #help, remove the 2 lines above and uncomment the 2 lines below.</div><div class="line">      #echo -e &quot;Use ${BOLD}$SCRIPT -h${NORM} to see the help documentation.&quot;\\n</div><div class="line">      #exit 2</div><div class="line">      ;;</div><div class="line">  esac</div><div class="line">done</div><div class="line"></div><div class="line">shift $((OPTIND-1))  #This tells getopts to move on to the next argument.</div><div class="line"></div><div class="line">### End getopts code ###</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">if [ &quot;$1&quot; = &quot;help&quot; ] || [ &quot;$#&quot; -ne $NBARGS ]; then</div><div class="line">if [ &quot;$#&quot; -ne $NBARGS ]; then</div><div class="line">    echo &quot;$(tput setaf 1)$(tput bold) Illegal number of parameters ($NBARGS params required, $# entered) $(tput sgr0)&quot;</div><div class="line">fi</div><div class="line">printHELP</div><div class="line">        exit</div><div class="line">fi</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ======================= CHECK REQUIRED FILES =================================</div><div class="line">echo &quot;&quot;</div><div class="line">checkFile file1.txt</div><div class="line">checkFile file1.txt</div><div class="line"></div><div class="line"></div><div class="line"># ============================= CHECK IF COMMAND EXISTS ==========================</div><div class="line"></div><div class="line">checkCommand SystemConfig</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">if [ $EXITSTATUS -eq 1 ]; then</div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot;$(tput setaf 1)$(tput bold) REQUIRED FILES, COMMANDS NOT FOUND: EXITING $(tput sgr0)&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">exit</div><div class="line">else</div><div class="line">echo &quot;&quot;</div><div class="line">fi</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ======================= SCRIPT CODE STARTS HERE =================================</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="page_cacao_topmenu.html">Subpages</a></li><li class="navelem"><a class="el" href="page_coding_standards.html">Coding Standards</a></li>
    <li class="footer">Generated on Sun Nov 24 2019 12:17:16 for cacao by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
